<html>
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js">
</script>
<link rel="stylesheet"
      href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
<link rel="stylesheet"
      href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js">
</script>
<script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
<script src="/js/ox.ajast.js"></script>
<script src="/js/webtoolkit.md5.js"></script>
<script src="/js/KalturaClientBase.js"></script>
<script src="/js/KalturaTypes.js"></script>
<script src="/js/KalturaVO.js"></script>
<script src="/js/KalturaServices.js"></script>
<script src="/js/KalturaClient.js"></script>
<script src="/js/vendor/jquery.ui.widget.js"></script>
<script src="/js/jquery.fileupload.js"></script>
<script src="/js/jquery.fileupload-kaltura.js"></script>

<script>
  addEntryFailed = function() {console.log('done!', arguments)};
  beforeAddEntry = function() {console.log('done!', arguments)};
  addEntryComplete = function() {console.log('done!', arguments)};
  swfReady = function() {console.log('done!', arguments)};
  recordStart = function() {console.log('done!', arguments)};
  var delegate = {
    addEntryComplete: function() {console.log('done!', arguments)},
    addEntryFailed: function() {console.log('fail', arguments)},
    beforeAddEntry: function() {console.log('before', arguments)},
    swfReady: swfReady,
  }
  var config = new KalturaConfiguration(1760921);
  config.serviceUrl = "http://www.kaltura.com/";
  var client = new KalturaClient(config);
  client.session.start(function(success, ks) {
    if (!success || (ks.code && ks.message)) {
      console.log('Error starting session', success, ks);
      $('#ErrorMessage').text(ks.message || 'Unknown Error').show();
    } else {
      client.setKs(ks);
      var params = {
        allowScriptAccess: "always",
        allowNetworking: "all",
        wmode: "opaque"
      };
      var flashVars = {};
      flashVars.delegate = delegate;
      flashVars["partnerId"]         = 1760921;  
      flashVars["ks"]                = ks;
      flashVars["Permissions"]       = 1;
      //flashVars["host"]              = $host;
      flashVars["autoPreview"]        = true;
      //flashVars["rtmp_host"]          = "rtmp://pa-publish.kaltura.com:1935/kLive/?p=1760921&e=0_bpgfl76r&i=0&t=fcfed573";
      flashVars["localeUrl"]          = "http://www.kaltura.com/flash/krecord/v1.0.31/locale.xml";
      flashVars["themeUrl"]           = "http://www.kaltura.com/flash/krecord/v1.0.8/skin.swf";
      swfobject.embedSWF("http://www.kaltura.com/krecord/ui_conf_id/1130902", "krecord", "400", "300", "9.0.0", "expressInstall.swf", flashVars, params);
    }
  }, "8d6cb692ab0f41bfa6bde373204c4b40",
  null,
  KalturaSessionType.ADMIN,
  1760921)
</script>

</head>

<body>
<h1>kRecord<h1>
<div id="krecord"></div>

</body>
</html>

